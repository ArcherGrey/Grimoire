(window.webpackJsonp=window.webpackJsonp||[]).push([[223],{622:function(v,_,e){"use strict";e.r(_);var l=e(19),t=Object(l.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"http-协议"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-协议"}},[v._v("#")]),v._v(" http 协议")]),v._v(" "),e("blockquote",[e("p",[e("code",[v._v("HyperText Transfer Protocal")]),v._v(" 超文本传输协议，应用层协议")])]),v._v(" "),e("h2",{attrs:{id:"特点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#特点"}},[v._v("#")]),v._v(" 特点")]),v._v(" "),e("ul",[e("li",[v._v("灵活可扩展：语法上只定义了基本格式，空格分隔单词，换行分隔字段等。另外一个就是传输形式上不仅可以传输文本，还可以传输图片，视频等任意数据")]),v._v(" "),e("li",[v._v("客户端/服务器模式：通常而言，就是一方发送消息，另外一方要接受消息，或者是做出响应等")]),v._v(" "),e("li",[v._v("可靠传输：基于 "),e("code",[v._v("TCP/IP")])]),v._v(" "),e("li",[v._v("无状态：无法保存之前的状态需要重传")]),v._v(" "),e("li",[v._v("明文传输：容易被攻击")])]),v._v(" "),e("h2",{attrs:{id:"uri"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#uri"}},[v._v("#")]),v._v(" "),e("code",[v._v("URI")])]),v._v(" "),e("p",[e("code",[v._v("http")]),v._v(" 协议使用 "),e("code",[v._v("URI")]),v._v(" 定位互联网上的资源：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("URI")]),v._v(" 统一资源标识符\n"),e("ul",[e("li",[e("code",[v._v("URL")]),v._v(" 统一资源定位符")]),v._v(" "),e("li",[e("code",[v._v("URN")]),v._v(" 统一资源名称")])])])]),v._v(" "),e("h2",{attrs:{id:"版本"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#版本"}},[v._v("#")]),v._v(" 版本")]),v._v(" "),e("ul",[e("li",[e("p",[v._v("1.1")]),v._v(" "),e("ul",[e("li",[v._v("引入持久连接：连接默认不关闭，可以被多个请求复用，通过请求头的 "),e("code",[v._v("keep-alive")]),v._v(" 设置\n"),e("ul",[e("li",[v._v("容易产生性能问题")])])]),v._v(" "),e("li",[v._v("引入管道机制：在同一个连接，客户端可以同时发送多个请求\n"),e("ul",[e("li",[v._v("需要按序处理，队头任务太慢 ，可能会导致队头阻塞")])])]),v._v(" "),e("li",[v._v("增加缓存控制")]),v._v(" "),e("li",[v._v("支持断点续传：通过设置请求头的 "),e("code",[v._v("Range")])]),v._v(" "),e("li",[v._v("使用了虚拟网络：在一台物理服务器上可以存在多个虚拟主机并共享 ip 地址")]),v._v(" "),e("li",[v._v("新增方法："),e("code",[v._v("PUT PATCH OPTIONS DELETE")])])])]),v._v(" "),e("li",[e("p",[v._v("2.0")]),v._v(" "),e("ul",[e("li",[v._v("二进制分帧：头信息和数据都是二进制帧")]),v._v(" "),e("li",[v._v("头部压缩：使用 "),e("code",[v._v("HPACK")]),v._v(" 对头部字段进行压缩")]),v._v(" "),e("li",[v._v("多路复用：一个连接，客户端和浏览器都可以同时发送多个请求和响应，不需要按序进行，解决了队头阻塞的问题")]),v._v(" "),e("li",[v._v("服务器推送：允许服务器未经请求，主动向客户端发送资源")]),v._v(" "),e("li",[v._v("请求优先级：可以设置数据帧的优先级，让服务器优先处理重要资源，提高用户体验")])])])]),v._v(" "),e("h2",{attrs:{id:"请求方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求方法"}},[v._v("#")]),v._v(" 请求方法")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("GET")]),v._v("：向特定资源发出请求，不应该用于产生副作用的操作\n"),e("ul",[e("li",[v._v("会主动缓存")])])]),v._v(" "),e("li",[e("code",[v._v("HEAD")]),v._v("：类似 "),e("code",[v._v("GET")]),v._v("，只是返回的响应没有响应体，用于获取报头中的信息")]),v._v(" "),e("li",[e("code",[v._v("POST")]),v._v("：向指定资源提交数据进行处理请求，数据在请求体中，可能会导致创建和修改资源")]),v._v(" "),e("li",[e("code",[v._v("PUT")]),v._v("：向指定资源上传最新内容替代")]),v._v(" "),e("li",[e("code",[v._v("DELETE")]),v._v("：请求服务器刪除指定内容")]),v._v(" "),e("li",[e("code",[v._v("OPTIONS")]),v._v("：返回服务器对指定资源所支持的 "),e("code",[v._v("HTTP")]),v._v(" 请求方法，也可以用来测试服务器功能")]),v._v(" "),e("li",[e("code",[v._v("TRACE")]),v._v("：回显服务器收到的请求，主要用于测试或诊断")]),v._v(" "),e("li",[e("code",[v._v("CONNECT")]),v._v("："),e("code",[v._v("HTTP/1.1")]),v._v(" 协议中预留给能够将连接改为管道方式的代理服务器")])]),v._v(" "),e("h3",{attrs:{id:"跨域请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#跨域请求"}},[v._v("#")]),v._v(" 跨域请求")]),v._v(" "),e("p",[v._v("在浏览器发送跨域请求的时候会分为")]),v._v(" "),e("ul",[e("li",[v._v("简单请求\n"),e("ul",[e("li",[v._v("请求方法为 "),e("code",[v._v("HEAD GET POST")])]),v._v(" "),e("li",[v._v("无自定义请求头")]),v._v(" "),e("li",[e("code",[v._v("Content-Type")]),v._v(" 只能是 "),e("code",[v._v("text/plain multipart/form-data application/x-www-form-urlencoded")])])])]),v._v(" "),e("li",[v._v("复杂请求")])]),v._v(" "),e("p",[v._v("如果是复杂请求就会先发送一个 "),e("code",[v._v("OPTIONS")]),v._v(" 预检请求")]),v._v(" "),e("h2",{attrs:{id:"状态码"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#状态码"}},[v._v("#")]),v._v(" 状态码")]),v._v(" "),e("ul",[e("li",[v._v("1xx 请求已被接收，需要继续处理")]),v._v(" "),e("li",[v._v("2xx 成功状态\n"),e("ul",[e("li",[v._v("200 "),e("code",[v._v("OK")]),v._v(" 表示从客户端发来的请求在服务器端被正确请求")]),v._v(" "),e("li",[v._v("204 "),e("code",[v._v("No content")]),v._v(" 表示请求成功，但没有资源可返回")]),v._v(" "),e("li",[v._v("206 "),e("code",[v._v("Partial Content")]),v._v(" 该状态码表示客户端进行了范围请求，而服务器成功执行了这部分的 "),e("code",[v._v("GET")]),v._v(" 请求\n响应报文中包含由 "),e("code",[v._v("「Content-Range」")]),v._v(" 指定范围的实体内容。")])])]),v._v(" "),e("li",[v._v("3xx 重定向\n"),e("ul",[e("li",[v._v("301 "),e("code",[v._v("moved permanently")]),v._v(" 永久性重定向，表示资源已被分配了新的 "),e("code",[v._v("URL")])]),v._v(" "),e("li",[v._v("302 "),e("code",[v._v("found")]),v._v(" 临时性重定向，表示资源临时被分配了新的 "),e("code",[v._v("URL")])]),v._v(" "),e("li",[v._v("303 "),e("code",[v._v("see other")]),v._v(" 表示资源存在着另一个 "),e("code",[v._v("URL")]),v._v("，应使用 "),e("code",[v._v("GET")]),v._v(" 方法获取资源（对于 301/302/303 响应，几乎所有浏览器都会删除报文主体并自动用 "),e("code",[v._v("GET")]),v._v(" 重新请求）")]),v._v(" "),e("li",[v._v("304 "),e("code",[v._v("not modified")]),v._v(" 表示服务器允许访问资源，但请求未满足条件的情况（与重定向无关）")]),v._v(" "),e("li",[v._v("307 "),e("code",[v._v("temporary redirect")]),v._v(" 临时重定向，和 302 含义类似，但是期望客户端保持请求方法不变向新的地址发出请求")])])]),v._v(" "),e("li",[v._v("4xx 客户端错误\n"),e("ul",[e("li",[v._v("400 "),e("code",[v._v("bad request")]),v._v(" 请求报文存在语法错误")]),v._v(" "),e("li",[v._v("401 "),e("code",[v._v("unauthorized")]),v._v(" 表示发送的请求需要有通过 "),e("code",[v._v("HTTP")]),v._v(" 认证的认证信息")]),v._v(" "),e("li",[v._v("403 "),e("code",[v._v("forbidden")]),v._v(" 表示对请求资源的访问被服务器拒绝，可在实体主体部分返回原因描述")]),v._v(" "),e("li",[v._v("404 "),e("code",[v._v("not found")]),v._v(" 表示在服务器上没有找到请求的资源")])])]),v._v(" "),e("li",[v._v("5xx 服务器错误\n"),e("ul",[e("li",[v._v("500 "),e("code",[v._v("internal sever error")]),v._v(" 表示服务器端在执行请求时发生了错误")]),v._v(" "),e("li",[v._v("501 "),e("code",[v._v("Not Implemented")]),v._v(" 表示服务器不支持当前请求所需要的某个功能")]),v._v(" "),e("li",[v._v("503 "),e("code",[v._v("service unavailable")]),v._v(" 表明服务器暂时处于超负载或正在停机维护，无法处理请求")])])])]),v._v(" "),e("h2",{attrs:{id:"缓存策略"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缓存策略"}},[v._v("#")]),v._v(" 缓存策略")]),v._v(" "),e("p",[v._v("浏览器缓存：")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("Service Worker")]),v._v(" 脱离浏览器窗口，无法访问 "),e("code",[v._v("DOM")]),v._v(" "),e("ul",[e("li",[v._v("离线缓存")]),v._v(" "),e("li",[v._v("消息推送")]),v._v(" "),e("li",[v._v("网络代理")])])]),v._v(" "),e("li",[e("code",[v._v("Memory Cache")]),v._v(" 内存缓存 速度最快 存活时间最短")]),v._v(" "),e("li",[e("code",[v._v("Disk Cache")]),v._v(" 磁盘缓存 比内存慢 存储时间长容量大")]),v._v(" "),e("li",[e("code",[v._v("Push Cache")]),v._v(" 推送缓存")])]),v._v(" "),e("img",{attrs:{src:v.$withBase("/net_http_1.png"),alt:"流程"}}),v._v(" "),e("p",[e("strong",[v._v("下面的标签都是响应头中由服务器配置的")])]),v._v(" "),e("h3",{attrs:{id:"强缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#强缓存"}},[v._v("#")]),v._v(" 强缓存")]),v._v(" "),e("p",[v._v("缓存有数据且未过期就直接返回数据，否则向服务器获取数据更新缓存")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("Expires")]),v._v(" 过期时间，通过服务器返回的响应头获取，过期之前可以直接从缓存中获取数据\n"),e("ul",[e("li",[v._v("1.0 版本 由于服务器时间和客户端时间可能存在误差，现在大多数用 "),e("code",[v._v("Cache-Control")])])])]),v._v(" "),e("li",[e("code",[v._v("Cache-Control")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("private")]),v._v(" 客户端可以缓存")]),v._v(" "),e("li",[e("code",[v._v("public")]),v._v(" 客户端和服务器都可以缓存")]),v._v(" "),e("li",[e("code",[v._v("max-age")]),v._v(" 缓存失效时间")]),v._v(" "),e("li",[e("code",[v._v("no-cache")]),v._v(" 需要协商缓存来验证")]),v._v(" "),e("li",[e("code",[v._v("no-store")]),v._v(" 所有都不缓存")])])])]),v._v(" "),e("p",[v._v("两个字段都存在优先考虑 "),e("code",[v._v("Cache-Control")])]),v._v(" "),e("h3",{attrs:{id:"协商缓存"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存"}},[v._v("#")]),v._v(" 协商缓存")]),v._v(" "),e("p",[v._v("从缓存获取缓存数据标识，带着标识向服务器请求是否失效，没有失效服务器返回 304，客户端就直接从缓存中获取请求数据，如果标识失效，服务器返回更新后端数据")]),v._v(" "),e("ul",[e("li",[e("code",[v._v("Last-Modified")]),v._v(" 资源修改时间\n"),e("ul",[e("li",[v._v("如果编辑了文件，内容没改也会导致缓存失效")]),v._v(" "),e("li",[v._v("单位是秒，如果一秒内改变，无法感知修改")])])]),v._v(" "),e("li",[e("code",[v._v("ETag")]),v._v(" 文件标识 和服务器上的进行对比")])]),v._v(" "),e("h3",{attrs:{id:"缓存优点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#缓存优点"}},[v._v("#")]),v._v(" 缓存优点")]),v._v(" "),e("ul",[e("li",[v._v("减少了冗余的数据传递，节省宽带流量")]),v._v(" "),e("li",[v._v("减少了服务器的负担，大大提高了网站性能")]),v._v(" "),e("li",[v._v("加快了客户端加载网页的速度 这也正是 "),e("code",[v._v("HTTP")]),v._v(" 缓存属于客户端缓存的原因。")])]),v._v(" "),e("h3",{attrs:{id:"浏览器不同刷新"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器不同刷新"}},[v._v("#")]),v._v(" 浏览器不同刷新")]),v._v(" "),e("ol",[e("li",[v._v("浏览器地址栏中写入 "),e("code",[v._v("URL")]),v._v("，回车浏览器发现缓存中有这个文件了，不用继续请求了，直接去缓存拿。（最快）")]),v._v(" "),e("li",[e("code",[v._v("F5")]),v._v(" 就是告诉浏览器，别偷懒，好歹去服务器看看这个文件是否有过期了。于是浏览器就胆胆襟襟的发送一个请求带上 "),e("code",[v._v("If-Modify-since")])]),v._v(" "),e("li",[e("code",[v._v("Ctrl+F5")]),v._v(" 告诉浏览器，你先把你缓存中的这个文件给我删了，然后再去服务器请求个完整的资源文件下来。于是客户端就完成了强行更新的操作")])]),v._v(" "),e("h2",{attrs:{id:"https"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#https"}},[v._v("#")]),v._v(" "),e("code",[v._v("HTTPS")])]),v._v(" "),e("blockquote",[e("p",[e("code",[v._v("HTTPS = HTTP + SSL/TLS")])])]),v._v(" "),e("ul",[e("li",[v._v("加密传输")]),v._v(" "),e("li",[v._v("SEO 更好")]),v._v(" "),e("li",[v._v("端口 443")]),v._v(" "),e("li",[v._v("需要证书")])]),v._v(" "),e("p",[e("code",[v._v("TLS")]),v._v(" 是 "),e("code",[v._v("SSL")]),v._v(" 的后续版本，用于身份校验和加密的一种协议")]),v._v(" "),e("p",[v._v("优点：")]),v._v(" "),e("ul",[e("li",[v._v("更安全")]),v._v(" "),e("li",[v._v("用来避免运营商劫持")])]),v._v(" "),e("p",[v._v("缺点：")]),v._v(" "),e("ul",[e("li",[v._v("使得页面加载时间延长")]),v._v(" "),e("li",[v._v("成本更高")]),v._v(" "),e("li",[v._v("依赖证书安全")]),v._v(" "),e("li",[v._v("无法防御 黑客攻击 "),e("code",[v._v("DDOS")]),v._v(" 和服务器劫持")])]),v._v(" "),e("p",[v._v("名词：")]),v._v(" "),e("ul",[e("li",[v._v("对称加密：加密 解密使用相同的密钥，常用："),e("code",[v._v("DES -> AES")])]),v._v(" "),e("li",[v._v("非对称加密：公钥加密 私钥解密，常用 "),e("code",[v._v("RSA")])])]),v._v(" "),e("h3",{attrs:{id:"流程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#流程"}},[v._v("#")]),v._v(" 流程")]),v._v(" "),e("ol",[e("li",[v._v("发起 "),e("code",[v._v("https")]),v._v(" 请求")]),v._v(" "),e("li",[v._v("服务器收到请求，返回数字证书")]),v._v(" "),e("li",[v._v("客户端收到证书，验证证书公钥是否有效，有效则生成一个随机数（密钥），用证书公钥对其进行（非对称）加密返回给服务器")]),v._v(" "),e("li",[v._v("服务器用证书私钥对加密进行解密，得到密钥后，把需要返回的内容用该密钥进行（对称）加密返回")]),v._v(" "),e("li",[v._v("客户端用本地密钥进行解密")])])])}),[],!1,null,null,null);_.default=t.exports}}]);